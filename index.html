<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>itch</title>
  <link type="text/css" rel="stylesheet" href="/css/style.css" />

  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-aabb-collider-component@3.1.0/dist/aframe-aabb-collider-component.min.js"></script>
  <!-- <script src="https://unpkg.com/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@fb96ab2/dist/aframe-extras.min.js"></script>

  <script src="/js/index.js"></script>
  <script type="module" src="./src/js/components/maze_generator.js"></script>
  <script type="module" src="./src/js/components/nav_mesh.js"></script>
  <script type="module" src="./src/js/components/check_collider.js"></script>
  <script type="module" src="./src/js/components/game_passed.js"></script>
</head>

<body>
  <a-scene environment="preset: yavapai;  grid: 1x1" renderer="antialias: true">
    <a-asset>
      <a-asset-item id="maze_1" src="./src/gltf/nav-mesh.glb"></a-asset-item>
      <img id="logo" src="./public/img/logo.png">
    </a-asset>

    <!-- grid box -->
    <a-entity maze_generator id="grid"></a-entity>
    <a-gltf-model class="navmesh" src="#maze_1" nav-mesh position="-0.009 0 0"></a-gltf-model>

    <!-- finish line -->
    <a-box color="green" position="0 0.5 -2" width="2" class="win" game_passed></a-box>

    <!-- maze ui -->

    <a-entity position="0 0 6" id="maze_ui">
      <a-image position="0 4.5 -0.2" rotation="10 0 0" src="#logo" width="5" height="1" material=""
        geometry=""></a-image>
      <a-text position="0 3 -0.2"
        value='Welcome to "Hyper Maze", the ultimate virtual reality labyrinth challenge. Your objective is to navigate through the maze, avoid obstacles, and reach the endpoint before time runs out.'
        width="3" align="center"></a-text>
      <!-- <a-text position="-2.1 2.7 -0.1" rotation="0 20 0" value="undefined" align="center"></a-text> -->
      <!-- <a-text position="2.1 2.7 -0.1" rotation="0 -20 0" value="undefined" align="center"></a-text> -->
      <a-text position="0 2 -0.2" align="center" value="Start" geometry="primitive:plane;height:0.4;"
        class="ui"></a-text>
    </a-entity>

    <!-- camera unit -->
    <a-entity id="rig" position="0 0 10" movement-controls="speed: 0.5;constrainToNavMesh: true;">

      <a-entity aabb-collider="objects: .win;debug:true" id="player" geometry="primitive:box;height:2;" position="0 1 0">
        
      </a-entity>
      <a-camera  near="0.1" far="10" look-controls="pointerLockEnabled: true" >

        <a-text color="black" position="2 1.5 -2" align="center" width="3" value="5"
          geometry="primitive:plane;height:0.2; width:0.2" material="opacity:0" id="counter_ui"></a-text>

      </a-camera>
      <a-entity id="left" oculus-touch-controls="hand: left"></a-entity>
      <a-entity collider-check laser-controls="hand: right" raycaster="objects: .ui" id="right"></a-entity>
    </a-entity>

  </a-scene>
</body>

</html>

<!-- navmesh-constraint="navmesh:.navmesh; fall: 0.5; height: 1.65;" -->
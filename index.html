<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>itch</title>
  <link type="text/css" rel="stylesheet" href="/css/style.css" />

  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script
    src="https://unpkg.com/aframe-aabb-collider-component@3.1.0/dist/aframe-aabb-collider-component.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@fb96ab2/dist/aframe-extras.min.js"></script>

  <script src="/js/index.js"></script>
  <script type="module" src="./src/js/components/maze_generator.js"></script>
  <script type="module" src="./src/js/components/reset_coll.js"></script>
  <script type="module" src="./src/js/components/check_collider.js"></script>
  <script type="module" src="./src/js/components/game_passed.js"></script>
</head>

<body>
  <!-- -->
  <a-scene renderer="antialias: true" environment="preset: yavapai;playArea:2;shadow:true;lightPosition:0 40 -45;horizonColor:#bde0fe;skyColor:#1d3557;">
    
    <a-asset>
      <img id="logo" src="./src/img/logo.png">
      <img id="won" src="./src/img/won.png">
      <audio id="noise" src="./src/sounds/noise.wav" preload="auto"></audio>
      <audio id="win" src="./src/sounds/win.wav" preload="auto"></audio>
      <audio id="click" src="./src/sounds/click.wav" preload="auto"></audio>
      <audio id="bgm" src="./src/sounds/bgm.wav" preload="auto"></audio>
    </a-asset>

    <!-- <a-box position="0 0.5 0" shadow=""></a-box> -->
    <!-- grid box -->
    <a-entity shadow="receive:false" maze_generator id="grid"></a-entity>


    <!-- finish line -->
    <a-entity game_passed id="finish_line">
      <a-plane color="green" rotation="-90 0 0" position="0 0.1 -2" width="10" class="win"></a-plane>
      <a-image id="passed_image" position="0 3 -4" rotation="10 0 0" src="#won" width="4" height="2" visible="false"
        sound="src: #win"></a-image>
      <a-text position="0 2 -4" rotation="10 0 0" align="center" value="More levels coming soon"
        visible="false"></a-text>
    </a-entity>

    <!-- maze ui -->
    <a-entity position="0 0 6" id="maze_ui">
      <a-image position="0 4.5 -0.2" rotation="10 0 0" src="#logo" width="5" height="1" material=""
        geometry=""></a-image>
      <a-text id="maze_intro" position="0 3 -0.2"
        value='Welcome to "Hyper Maze", the ultimate virtual reality labyrinth challenge. Your objective is to navigate through the maze, avoid obstacles, and reach the endpoint before time runs out.'
        width="3" align="center"></a-text>
      <a-text id="maze_button" position="0 2 -0.2" align="center" value="Start" geometry="primitive:plane;height:0.4;"
        class="ui" sound="src: #click"></a-text>
    </a-entity>

    <!-- camera unit -->
    <a-entity reset-on-collision="with: .box" id="rig" position="0 0 5"
      movement-controls="camera:#vr_camera;speed: 0.5;enabled:true" material="opacity:0;">

      <a-entity aabb-collider="objects: .win;" id="player" geometry="primitive:box;height:2;width:0.5;" position="0 1 0"
        visible="false">

      </a-entity>

      <a-camera id="vr_camera" wasd-controls-enabled="false" sound="src:#noise;autoplay:false;loop:true">

        <a-text color=" black" position="0 1 -2" align="center" width="3" value="5"
          geometry="primitive:plane;height:0.2; width:0.2" material="opacity:0" id="counter_ui"></a-text>

      </a-camera>
      <a-entity id="left" oculus-touch-controls="hand: left"></a-entity>
      <a-entity collider-check laser-controls="hand: right" raycaster="objects: .ui" id="rightHand"></a-entity>
    </a-entity>

  </a-scene>
</body>

</html>

<!-- navmesh-constraint="navmesh:.navmesh; fall: 0.5; height: 1.65;" -->